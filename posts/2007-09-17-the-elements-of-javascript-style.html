<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"class="no-webfont"><title>realazy: JavaScript 风格要素</title><meta charset="utf-8"><meta name="viewport"content="width=device-width,initial-scale=1,viewport-fit=cover"><link rel="alternate"href="http://feeds.feedburner.com/realazy"type="application/atom+xml"title="Realazy"><link rel="stylesheet"href="/assets/style.min.css"><body id="post"><header><h1><a href="/">真・懒</a></h1><section><span><a href="/feed.atom">订阅</a></span> <span><a href="https://twitter.com/_cxa">Twitter</a></span> <span><a href="https://github.com/cxa">GitHub</a></span> <span><a href="mailto:xianan.chen@gmail.com">联系</a></span></section></header><main><h1>JavaScript 风格要素</h1><section class="meta"><time datetime="2007-09-17">二〇〇七年九月十七日</time></section><p>关于英文的写作有一本十分著名的书，<a href="http://crockford.com/wrrrld/style.html">The Elements of Style</a>（风格要素），编写程序也有一本 <a href="http://www.amazon.com/exec/obidos/ASIN/0070342075/wrrrldwideweb">The Elements of Programming Style</a>（编程风格要素）。证明了在某种程度上，编写程序其实就是语文写作，清晰的风格对程序的质量有着重要的影响。草率含混的风格会隐蔽程序真性。<p>作为 JavaScript Guru, <a href="http://www.crockford.com/">Douglas Crockford</a> 提出了自己对 JavaScript 风格的创见（<a href="http://javascript.crockford.com/style1.html">第一部分</a>，<a href="http://javascript.crockford.com/style2.html">第二部分</a>）。<p>第一部分主要讨论 JavaScript 语言本身，包括：<ul><li><strong>淘汰过时的构建</strong>：讨论了在 HTML 页面引入 JavaScript 的方式。经典的写法是： <code>&lt;script language=&quot;javascript&quot;&gt;&lt;!-- --&gt;&lt;/script&gt;</code>。<code>language</code> 并不是 W3C 所认同的标准，建议使用的是 <code>type</code>, 但作为 <code>type</code> 值的 MIME type 并没有标准化（有时是 <code>text/javascript</code>, 有时是 <code>application/ecmascript</code>），但目前所有的浏览器都是使用 JavaScript 作为默认的脚本语言，因此仅仅写<code>&lt;script&gt;</code> 就是安全的。随着 NetScape 3 的淘汰，<code>&lt;-- --&gt;</code> 也不是必要的了。 （注：这个东西 Web 标准社区也有自己的看法，并认为应该写 <code>type=&quot;text/javascript&quot;</code>，我也赞成。）<li><strong>在结构中始终使用区块</strong>：莫偷懒，省略区块（即 <code>{ }</code>）会引发不经意的错误和麻烦。即使只有一句，也老老实实写上：<code>if (expression) { ... }</code><li><strong>避免在表达式中进行赋值</strong>：虽然可以使代码紧凑，但会让控制流程难于理解。<li><strong>使用对象扩充</strong>：在不需要构造函数的对象中，不如先创建一个空对象，然后扩充它。<li><strong>使用通用库</strong>：注意提高代码的重用。</ul><p>第二部分主要讲的是一些使程序更清晰和简洁的习惯用法：<ul><li><strong>使用 <code>==</code> 得当心强类</strong>：<code>1 == true</code> 是真，但 <code>1 === true</code> 却为假。<li><strong>使用 <code>?:</code> 运算符选择两值之一</strong>：在这种操作中，三元运算符为此而生。<li><strong>永远不要使用隐含的全局变量</strong>：请记得声明变量时加上 <code>var</code>.<li><strong>不要使用 <code>?:</code> 来选择两种行为的其一</strong>：写作 <code>p.style.backgroundColor = z ? &#39;#fff&#39; : &#39;#989898&#39;;</code> 而不是 <code>(z == 0) ? p.style.backgroundColor = &#39;#fff&#39; : p.style.backgroundColor = &#39;#989898&#39;;</code>。<li><strong>使用 <code>||</code> 来指定一个默认值</strong>：最典型的莫过于处理事件参数了：<code>var e = e || event;</code>。<li><strong>全局变量是邪恶的</strong><li><strong>使用内部函数来避免全局变量</strong></ul><p>这些风格是 Crock 在 2005 年提出的，现在有些已经深入人心（如不要使用全局变量），因而也没有必要多做解释了。如果你有所疑惑，不如详细看看这两篇风格文章，里面有大量的代码来举证这些风格的重要性。<p><strong>更新：</strong><a href="http://dojotoolkit.org/developer/StyleGuide">Dojo 的风格指南</a> 也不错。</main><footer><div class="intro"><img src="/assets/avatar.png"alt="头像"width="128"><p>我是陈贤安，喜欢钻研构建程序介面的技术，偏好静态类型函数式编程。常用编程语言有 JavaScript，会使 Swift、Objective-C、F# 和 OCaml。能看懂 C，想学会 Haskell 和 Erlang。逼急了也能撸起袖子码码其他的语言。realazy, 意取「真懒」，因为我相信，懒，对程序员来说，是一种美德。</div><p>2005 ～ 2020 © <span><a href="/">realazy</a></span> <span><a href="https://github.com/cxa/cxa.github.com.git">本站源码</a></span></footer><script src="/assets/highlight.js"></script><script src="/assets/script.js"></script>