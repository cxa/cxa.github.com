<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"class="no-webfont"><title>realazy: 也谈 Doctype</title><meta charset="utf-8"><meta name="viewport"content="width=device-width,initial-scale=1,viewport-fit=cover"><link rel="alternate"href="https://feeds.feedburner.com/realazy"type="application/atom+xml"title="Realazy"><link rel="stylesheet"href="/assets/style.min.css"><body id="post"><header><h1><a href="/">真・懒</a></h1><section><span><a href="/feed.atom">订阅</a></span> <span><a href="https://twitter.com/_cxa">Twitter</a></span> <span><a href="https://github.com/cxa">GitHub</a></span> <span><a href="mailto:xianan.chen@gmail.com">联系</a></span></section></header><main><h1><span>也谈 Doctype</span></h1><section class="meta"><time datetime="2006-06-21">二〇〇六年六月二十一日</time></section><p>目前有一堆 Doctype 可供我们选择：<h2 id="HTML">HTML</h2><ul><li><strong>HTML 4.0 Strict</strong>: <code>&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0//EN&quot; &quot;http://www.w3.org/TR/REC-html40/strict.dtd&quot;&gt;</code><li><strong>HTML 4.0 Transitional</strong>: <code>&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</code><li><strong>HTML 4.0 Frameset</strong>: <code>&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Frameset//EN&quot; &quot;http://www.w3.org/TR/html4/frameset.dtd&quot;&gt;</code><li><strong>HTML 3.2</strong>: <code>&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 3.2 Final//EN&quot;&gt;</code><li><strong>HTML 2.0</strong>: <code>&lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML//EN&quot;&gt;</code></ul><h2 id="XHTML">XHTML</h2><ul><li><strong>XHTML 1.0 Strict</strong>: <code>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;</code><li><strong>XHTML 1.0 Transitional</strong>: <code>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</code><li><strong>XHTML 1.0 Frameset</strong>: <code>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Frameset//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd&quot;&gt;</code><li><strong>XHTML 1.1</strong>: <code>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.1//EN&quot; &quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd&quot;&gt;</code></ul><p>说明一下，XHTML 1 就是 HTML 4.01 的 XML 化，是一种不向前兼容的格式，未来的 XHTML 2 也不会向后兼容。汗……这是一个很可悲规范。<p>那么应该选择哪个？我相信很多人，尤其是接触了网页标准（Web Standards）的人，会毫不犹豫地选择 XHTML 1.0 Transitional。这是一股趋势，这是一股潮流，暗示着，嘿嘿，伙计，看见没，我们的网站使用最新技术构建了……<p>这里有一个<a href="http://www.elementary-group-standards.com/archives/site-standards/why-xhtml.html">很有趣的统计</a>，使用 XHTML 1.0 Strict 和 Transitional 的占绝大多数，且对半开。那么，这个世界就那么美好了吗？<p>我们先来看看 <a href="http://www.w3.org/TR/2002/NOTE-xhtml-media-types-20020801/">W3C 的建议</a>，总结出下表：<table class="mime_types"summary="This table summarizes recommendation for media type labeling of HTML and XHTML documents."><caption>Media types summary for serving XHTML documents<thead><tr><th>Media Type<th>text/html<th>application/xhtml+xml<th>application/xml<th>text/xml<tbody><tr><th>HTML 4<td>SHOULD<td>MUST NOT<td>MUST NOT<td>MUST NOT<tr><th>XHTML 1.0 (HTML Compatible)<td>MAY<td>SHOULD<td>MAY<td>MAY<tr><th>XHTML 1.0 (other)<td>SHOULD NOT<td>SHOULD<td>MAY<td>MAY<tr><th>XHTML Basic<td>SHOULD NOT<td>SHOULD<td>MAY<td>MAY<tr><th>XHTML 1.1<td>SHOULD NOT<td>SHOULD<td>MAY<td>MAY<tr><th>XHTML + MathML<td>SHOULD NOT<td>SHOULD<td>MAY<td>MAY</table><p>前面说到，XHTML 1 实际上是 HTML 4.01 的 XML 化。即时看起来，写起来，用起来都很像，但这是两种不同的规范。XHTML 的 MIME-TYPE 应该是 <code>application/xhtml+xml</code>，而 HTML 应该是 <code>text/html</code>。两者有何不同，简单的说，<code>application/xhtml+xml</code> 属于 XML，所以行为遵循一切 XML 规范，最重要的是良构（Well-Formed）这一点。<p>除了 XHTML 1.0 Transitional 和 Frameset，我们可以看到，XHTML 1.0 Strict 和 1.1 都<strong>SHOULD</strong>使用 <code>application/xhtml+xml</code>。然而，我们可以看到，前面提到的那个统计，并没有多少个网站使用 <code>application/xhtml+xml</code>，可以说他们是扯虎皮做大旗而已（如果您有心查看一下本 blog 的源码，您会发现我也是），它们非良构的内容依然可以通过支持 <code>application/xhtml+xml</code> 的浏览器（如 Firefox, Opera）来展现，因为它们本质上还是 <code>text/html</code>，而 <code>text/html</code> 并不需要良构。<p>可以看到，XHTML 1.0 Transitional 的地位很暧昧，它的 <strong>Transitional</strong> 使其 <strong>SHOULD BE</strong> <code>application/xhtml+xml</code>，但也可能 <strong>MAY BE</strong> <code>text/html</code>。也就是说，怎么处理，实际上交由客户端（client side）来决定。在我所见到的桌面浏览器中，它们都毫不犹豫地选择 <code>text/html</code>，这跟它们一贯的<strong>宽容</strong>风格保持一致。<p>但是很不幸的是，就有这么一个浏览器，Opera for mobile，从 8.0 开始，凡是声明了 XHTML 的 Doctype，它都一律以 <code>application/xhtml+xml</code> 来处理。所以，你那不良构的网站，只好在它上面显示出错信息。<p>所以，推荐使用 XHTML 1.0 Transitional，是鼓励你从 HTML 向 XHTML 转化，且保持过渡性。但过渡性并不代表你就可以不重视 XML 的良构。<p>实际上，我们并没有能够发现 XHTML 1.0 Transitional 跟 HTML 4.01 Strict 有何不同，除了一个 <code>target</code>，一些过时的表现标签和属性（attribute）。只要我们在 HTML 中不写作那些 XHTML 中不存在的标签和属性，我们实际上就是在写 XHTML 1.0 Transitional，对我们并没有什么影响，什么 XML 的优越性完全不能在 XHTML 1.0 Transitional 中体现出来，所以与其让 Opera for mobile（或许还有其他变数）不能工作，还不如选择 HTML 4.01 Strict。在这点上，<a href="http://www.456bereastreet.com">456BereaStreet.com</a> 做出了一个十分不错的选择。当然，如果您能保证你的 XHTML 1.0 Transitional 百分百良构，使用它是一个更佳的选择。然后，请你告诉我，世界上，使用了 XHTML 1.0 Transitional 的网站，<strong>非首页</strong>的其他页面能有多少个是能够通过验证的？<p>结论是，如果你没有勇气保证整个站点百分百良构，请使用 HTML 4.01 Strict；如果您有勇气保证整个站点百分百良构，您可以直接选择 XHTML 1.1，像我所做的那样。<p><strong>推荐阅读：</strong><ul><li><a href="https://www.google.com/search?q=使用正确的MIME类型伺服XHTML&amp;ie=UTF-8&amp;oe=UTF-8">使用正确的 MIME 类型伺服 XHTML</a><li><a href="https://www.google.com/search?q=正确使用XHTML的冒险&amp;ie=UTF-8&amp;oe=UTF-8">正确使用 XHTML 的冒险</a><li><a href="http://www.456bereastreet.com/archive/200606/html_vs_xhtml_on_standards_compliant_websites/">HTML vs. XHTML on standards compliant websites</a></ul></main><footer><div class="intro"><img src="/assets/avatar.png"alt="头像"width="128"><p>我是陈贤安，喜欢钻研构建程序介面的技术，偏好静态类型函数式编程。常用编程语言有 JavaScript，会使 Swift、Objective-C、F# 和 OCaml。能看懂 C。realazy, 意取「真懒」，因为我相信，懒，对程序员来说，是一种美德。</div><p>2005 ～ 2023 © <span><a href="/">realazy</a></span> <span><a href="https://github.com/cxa/cxa.github.com.git">本站源码</a></span></footer><script src="/assets/script.min.js"></script>