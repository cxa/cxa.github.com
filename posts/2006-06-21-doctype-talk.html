<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>realazy: 也谈Doctype</title><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/assets/style.css" type="text/css"/><link rel="stylesheet" href="/assets/fonts.css" type="text/css" media="none" onload="if(media!='all') media='all'"/></head><body id="post">
       <header>
        <h1>也谈Doctype</h1>
        <p>
          <a href="/">真・懒</a>写于<time datetime="2006-06-21">二〇〇六年六月二十一日</time>
        </p>
      </header>
      <main> 
        <p>目前有一堆Doctype可供我们选择：</p>
<p><strong>HTML</strong></p>
<ul><li><strong>HTML 4.0 Strict</strong>: &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0//EN&quot; &quot;http://www.w3.org/TR/REC-html40/strict.dtd&quot;&gt;</li><li><strong>HTML 4.0 Transitional</strong>: &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</li><li><strong>HTML 4.0 Frameset</strong>: &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Frameset//EN&quot; &quot;http://www.w3.org/TR/html4/frameset.dtd&quot;&gt;</li><li><strong>HTML 3.2</strong>: &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 3.2 Final//EN&quot;&gt;</li><li><strong>HTML 2.0</strong>: &lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML//EN&quot;&gt;</li></ul>

<p><strong>XHTML</strong></p>
<ul><li><strong>XHTML 1.0 Strict</strong>: &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;</li><li><strong>XHTML 1.0 Transitional</strong>: &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</li><li><strong>XHTML 1.0 Frameset</strong>: &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Frameset//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd&quot;&gt;</li><li><strong>XHTML 1.1</strong>: &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.1//EN&quot; &quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd&quot;&gt;</li></ul>

<p>说明一下，XHTML 1就是HTML 4.01的XML化，是一种不向前兼容的格式，未来的XHTML 2也不会向后兼容。汗……这是一个很可悲规范。</p>
<p>那么应该选择哪个？我相信很多人，尤其是接触了网页标准（Web Standards）的人，会毫不犹豫地选择XHTML 1.0 Transitional。这是一股趋势，这是一股潮流，暗示着，嘿嘿，伙计，看见没，我们的网站使用最新技术构建了……</p>
<p>这里有一个<a href='http://www.elementary-group-standards.com/archives/site-standards/why-xhtml.html'>很有趣的统计</a>，使用XHTML 1.0 Strict和Transitional的占绝大多数，且对半开。那么，这个世界就那么美好了吗？</p>
<p>我们先来看看<a href='http://www.w3.org/TR/2002/NOTE-xhtml-media-types-20020801/'>W3C的建议</a>，总结出下表：
Media types summary for serving XHTML documents
Media Type
text/html
application/xhtml+xml
application/xml
text/xml</p>
<p>HTML 4
SHOULD
MUST NOT
MUST NOT
MUST NOT</p>
<p>XHTML 1.0 (HTML Compatible)
MAY
SHOULD
MAY
MAY</p>
<p>XHTML 1.0 (other)
SHOULD NOT
SHOULD
MAY
MAY</p>
<p>XHTML Basic
SHOULD NOT
SHOULD
MAY
MAY</p>
<p>XHTML 1.1
SHOULD NOT
SHOULD
MAY
MAY</p>
<p>XHTML + MathML
SHOULD NOT
SHOULD
MAY
MAY</p>
<p>前面说到，XHTML 1实际上是HTML 4.01的XML化。即时看起来，写起来，用起来都很像，但这是两种不同的规范。XHTML的MIME-TYPE应该是<code>application/xhtml+xml</code>，而HTML应该是<code>text/html</code>。两者有何不同，简单的说，<code>application/xhtml+xml</code>属于XML，所以行为遵循一切XML规范，最重要的是良构（Well-Formed）这一点。</p>
<p>除了XHTML 1.0 Transitional和Frameset，我们可以看到，XHTML 1.0 Strict和1.1都<strong>SHOULD</strong>使用<code>application/xhtml+xml</code>。然而，我们可以看到，前面提到的那个统计，并没有多少个网站使用<code>application/xhtml+xml</code>，可以说他们是扯虎皮做大旗而已（如果您有心查看一下本blog的源码，您会发现我也是），它们非良构的内容依然可以通过支持<code>application/xhtml+xml</code>的浏览器（如Firefox, Opera）来展现，因为它们本质上还是<code>text/html</code>，而<code>text/html</code>并不需要良构。</p>
<p>可以看到，XHTML 1.0 Transitional的地位很暧昧，它的<strong>Transitional **使得其</strong>MAY<strong> <code>text/html</code>，</strong>SHOULD<strong> <code>application/xhtml+xml</code>。也就是说，怎么处理，实际上交由客户端（client side）来决定。在我所见到的桌面浏览器中，它们都毫不犹豫地选择<code>text/html</code>，这跟它们一贯的</strong>宽容**风格保持一致。</p>
<p>但是很不幸的是，就有这么一个浏览器，Opera for mobile，从8.0开始，凡是声明了XHTML的Doctype，它都一律以<code>application/xhtml+xml</code>来处理。所以，你那不良构的网站，只好在它上面显示出错信息。</p>
<p>所以，推荐使用XHTML 1.0 Transitional，是鼓励你从HTML向XHTML转化，且保持过渡性。但过渡性并不代表你就可以不重视XML的良构。</p>
<p>实际上，我们并没有能够发现XHTML 1.0 Transitional跟HTML 4.01 Strict有何不同，除了一个<code>target</code>，一些过时的表现标签和属性（attribute）。只要我们在HTML中不写作那些XHTML中不存在的标签和属性，我们实际上就是在写XHTML 1.0 Transitional，对我们并没有什么影响，什么XML的优越性完全不能在XHTML 1.0 Transitional中体现出来，所以与其让Opera for mobile（或许还有其他变数）不能工作，还不如选择HTML 4.01 Strict。在这点上，<a href='http://www.456bereastreet.com'>456BereaStreet.com</a>做出了一个十分不错的选择。当然，如果您能保证你的XHTML 1.0 Transitional百分百良构，使用它是一个更佳的选择。然后，请你告诉我，世界上，使用了XHTML 1.0 Transitional的网站，<strong>非首页</strong>的其他页面能有多少个是能够通过验证的？</p>
<p>结论是，如果你没有勇气保证整个站点百分百良构，请使用HTML 4.01 Strict；如果您有勇气保证整个站点百分百良构，您可以直接选择XHTML 1.1，像我所做的那样。</p>
<p><strong>推荐阅读：</strong></p>
<ul><li><a href='https://www.google.com/search?q=使用正确的MIME类型伺服XHTML&amp;ie=UTF-8&amp;oe=UTF-8'>使用正确的MIME类型伺服XHTML</a></li><li><a href='https://www.google.com/search?q=正确使用XHTML的冒险&amp;ie=UTF-8&amp;oe=UTF-8'>正确使用XHTML的冒险</a></li><li><a href='http://www.456bereastreet.com/archive/200606/html_vs_xhtml_on_standards_compliant_websites/'>HTML vs. XHTML on standards compliant websites</a></li></ul>


      </main>
       <footer>
         <p>2005 ～ 2017 © <span><a href="/">realazy</a></span> <span><a href="https://twitter.com/_cxa">Twitter</a></span> <span><a href="https://github.com/cxa">GitHub</a></span></p>
       </footer>
     </body></html>