<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="no-webfont"><head><title>realazy: 也谈 Doctype</title><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="alternate" href="http://feeds.feedburner.com/realazy" type="application/atom+xml" title="Realazy"/><link rel="stylesheet" href="/assets/style.css"/><script src="/assets/highlight.js"> </script></head><body id="post">
      <header>
        <h1>也谈 Doctype</h1>
        <p>
          <time datetime="2006-06-21">二〇〇六年六月二十一日</time>
        </p>
      </header>
      <main>
        <p>目前有一堆 Doctype 可供我们选择：</p>
<p><strong>HTML</strong></p>
<ul><li><strong>HTML 4.0 Strict</strong>: &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0//EN&quot; &quot;http://www.w3.org/TR/REC-html40/strict.dtd&quot;&gt;</li><li><strong>HTML 4.0 Transitional</strong>: &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</li><li><strong>HTML 4.0 Frameset</strong>: &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Frameset//EN&quot; &quot;http://www.w3.org/TR/html4/frameset.dtd&quot;&gt;</li><li><strong>HTML 3.2</strong>: &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 3.2 Final//EN&quot;&gt;</li><li><strong>HTML 2.0</strong>: &lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML//EN&quot;&gt;</li></ul>

<p><strong>XHTML</strong></p>
<ul><li><strong>XHTML 1.0 Strict</strong>: &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;</li><li><strong>XHTML 1.0 Transitional</strong>: &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</li><li><strong>XHTML 1.0 Frameset</strong>: &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Frameset//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd&quot;&gt;</li><li><strong>XHTML 1.1</strong>: &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.1//EN&quot; &quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd&quot;&gt;</li></ul>

<p>说明一下，XHTML 1 就是 HTML 4.01 的 XML 化，是一种不向前兼容的格式，未来的 XHTML 2 也不会向后兼容。汗……这是一个很可悲规范。</p>
<p>那么应该选择哪个？我相信很多人，尤其是接触了网页标准（Web Standards）的人，会毫不犹豫地选择 XHTML 1.0 Transitional。这是一股趋势，这是一股潮流，暗示着，嘿嘿，伙计，看见没，我们的网站使用最新技术构建了……</p>
<p>这里有一个 <a href='http://www.elementary-group-standards.com/archives/site-standards/why-xhtml.html'>很有趣的统计</a>，使用 XHTML 1.0 Strict 和 Transitional 的占绝大多数，且对半开。那么，这个世界就那么美好了吗？</p>
<p>我们先来看看 <a href='http://www.w3.org/TR/2002/NOTE-xhtml-media-types-20020801/'>W3C 的建议</a>，总结出下表：</p>
<table class='mime_types' summary='This table summarizes recommendation for media type labeling of HTML and XHTML documents.'>
  <caption>Media types summary for serving XHTML documents</caption>
  <thead>
    <tr>
      <th>Media Type</th>
      <th>text/html</th>
      <th>application/xhtml+xml</th>
      <th>application/xml</th>
      <th>text/xml</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>HTML 4</th>
      <td>SHOULD</td>
      <td>MUST NOT</td>
      <td>MUST NOT</td>
      <td>MUST NOT</td>
    </tr>
    <tr>
      <th>XHTML 1.0 (HTML Compatible)</th>
      <td>MAY</td>
      <td>SHOULD</td>
      <td>MAY</td>
      <td>MAY</td>
    </tr>
    <tr>
      <th>XHTML 1.0 (other)</th>
      <td>SHOULD NOT</td>
      <td>SHOULD</td>
      <td>MAY</td>
      <td>MAY</td>
    </tr>
    <tr>
      <th>XHTML Basic</th>
      <td>SHOULD NOT</td>
      <td>SHOULD</td>
      <td>MAY</td>
      <td>MAY</td>
    </tr>
    <tr>
      <th>XHTML 1.1</th>
      <td>SHOULD NOT</td>
      <td>SHOULD</td>
      <td>MAY</td>
      <td>MAY</td>
    </tr>
    <tr>
      <th>XHTML + MathML</th>
      <td>SHOULD NOT</td>
      <td>SHOULD</td>
      <td>MAY</td>
      <td>MAY</td>
    </tr>
  </tbody>
</table>

<p>前面说到，XHTML 1 实际上是 HTML 4.01 的 XML 化。即时看起来，写起来，用起来都很像，但这是两种不同的规范。XHTML 的 MIME-TYPE 应该是 <code>application/xhtml+xml</code>，而 HTML 应该是 <code>text/html</code>。两者有何不同，简单的说，<code>application/xhtml+xml</code> 属于 XML，所以行为遵循一切 XML 规范，最重要的是良构（Well-Formed）这一点。</p>
<p>除了 XHTML 1.0 Transitional 和 Frameset，我们可以看到，XHTML 1.0 Strict 和 1.1 都<strong>SHOULD</strong>使用 <code>application/xhtml+xml</code>。然而，我们可以看到，前面提到的那个统计，并没有多少个网站使用 <code>application/xhtml+xml</code>，可以说他们是扯虎皮做大旗而已（如果您有心查看一下本 blog 的源码，您会发现我也是），它们非良构的内容依然可以通过支持 <code>application/xhtml+xml</code> 的浏览器（如 Firefox, Opera）来展现，因为它们本质上还是 <code>text/html</code>，而 <code>text/html</code> 并不需要良构。</p>
<p>可以看到，XHTML 1.0 Transitional 的地位很暧昧，它的<strong>Transitional **使得其</strong>MAY<strong> <code>text/html</code>，</strong>SHOULD<strong> <code>application/xhtml+xml</code>。也就是说，怎么处理，实际上交由客户端（client side）来决定。在我所见到的桌面浏览器中，它们都毫不犹豫地选择 <code>text/html</code>，这跟它们一贯的</strong>宽容**风格保持一致。</p>
<p>但是很不幸的是，就有这么一个浏览器，Opera for mobile，从 8.0 开始，凡是声明了 XHTML 的 Doctype，它都一律以 <code>application/xhtml+xml</code> 来处理。所以，你那不良构的网站，只好在它上面显示出错信息。</p>
<p>所以，推荐使用 XHTML 1.0 Transitional，是鼓励你从 HTML 向 XHTML 转化，且保持过渡性。但过渡性并不代表你就可以不重视 XML 的良构。</p>
<p>实际上，我们并没有能够发现 XHTML 1.0 Transitional 跟 HTML 4.01 Strict 有何不同，除了一个 <code>target</code>，一些过时的表现标签和属性（attribute）。只要我们在 HTML 中不写作那些 XHTML 中不存在的标签和属性，我们实际上就是在写 XHTML 1.0 Transitional，对我们并没有什么影响，什么 XML 的优越性完全不能在 XHTML 1.0 Transitional 中体现出来，所以与其让 Opera for mobile（或许还有其他变数）不能工作，还不如选择 HTML 4.01 Strict。在这点上，<a href='http://www.456bereastreet.com'>456BereaStreet.com</a> 做出了一个十分不错的选择。当然，如果您能保证你的 XHTML 1.0 Transitional 百分百良构，使用它是一个更佳的选择。然后，请你告诉我，世界上，使用了 XHTML 1.0 Transitional 的网站，<strong>非首页</strong>的其他页面能有多少个是能够通过验证的？</p>
<p>结论是，如果你没有勇气保证整个站点百分百良构，请使用 HTML 4.01 Strict；如果您有勇气保证整个站点百分百良构，您可以直接选择 XHTML 1.1，像我所做的那样。</p>
<p><strong>推荐阅读：</strong></p>
<ul><li><a href='https://www.google.com/search?q=使用正确的'>使用正确的 MIME 类型伺服 XHTML</a></li><li><a href='https://www.google.com/search?q=正确使用'>正确使用 XHTML 的冒险</a></li><li><a href='http://www.456bereastreet.com/archive/200606/html_vs_xhtml_on_standards_compliant_websites/'>HTML vs. XHTML on standards compliant websites</a></li></ul>

<p>MIME 类型伺服 XHTML&amp;ie=UTF-8&amp;oe=UTF-8
XHTML 的冒险&amp;ie=UTF-8&amp;oe=UTF-8</p>

      </main>
      <footer>
      <div class="intro"><img src="/assets/avatar.jpg" alt="头像" width="128"/><p>我是陈贤安，喜欢钻研构建程序介面的技术，偏好静态类型函数式编程。常用编程语言有 Swift、Objective-C、JavaScript 和 OCaml。能看懂 C，想学会 Haskell 和 Erlang。逼急了也能撸起袖子码码其他的语言。realazy, 意取「真懒」，因为我相信，懒，对程序员来说，是一种美德。</p></div><p>2005 ～ 2020 ©
                                  <span><a href="/">realazy</a></span>
                                  <span><a href="https://twitter.com/_cxa">Twitter</a></span>
                                  <span><a href="https://github.com/cxa">GitHub</a></span>
                                  <span><a href="https://github.com/cxa/cxa.github.com.git">本站源码</a></span>
       </p>
       </footer>
       <script>
        WebFontConfig = {
          custom: {
            families: ['Anonymous Pro Minus:n4,n7,i4,i7', 'EB Garamond:n4,n7', 'Noto Serif CJK SC:n4,n8'],
            urls: ['/assets/fonts.css']
          },
          timeout: 60000
        };

        (function (d) {
          [].forEach.call(d.querySelectorAll('pre code'), function(b){ hljs.highlightBlock(b) });
          var a = navigator.userAgent||navigator.vendor||window.opera,
              isMobile = /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|ad|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4));
          if (isMobile) return;
          d.documentElement.className = d.documentElement.className.replace(/no\-webfont/, '');
          var wf = d.createElement('script'),
              s = d.scripts[0];
          wf.src = '/assets/webfontloader.js';
          wf.async = true;
          s.parentNode.insertBefore(wf, s);
        })(document);
      </script>
    
  
  </body></html>